<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="css/font-awesome.css">
  <link href="https://fonts.googleapis.com/css?family=Cuprum" rel="stylesheet">
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <link rel="icon" href="logo.png">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
    integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
  <title>RARITY</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>



</head>

<body style="background: url(bg-body.jpg);">
<div id="index"></div>
<nav class="navbar navbar-expand-lg navbar-light" style="border-bottom: 1px solid #E1E1E1;">
  <div class="container">
    <a href="index" class="navbar-brand">
      <img src="logo.png" width="120px" height="120px" alt="logo">
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expended="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto nav-icon">
        <li class="nav-item active">
          <a href="index" class="nav-link "><i class="fa fa-home"></i><p th:text="#{label.main}"></p></a>
        </li>
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" id="navbarDropdown" role="button"
             data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i
                  class="fa fa-info"></i><p th:text="#{label.category}"></p></a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="/antikiick"><p th:text="#{label.antiquesAndArt}"></p></a>
            <a class="dropdown-item" href="/vintag"><p th:text="#{label.vintage}"></p></a>
            <a class="dropdown-item" href="/collec"><p th:text="#{label.collection}"></p></a>
            <a class="dropdown-item" href="/sdelsruk"><p th:text="#{label.handmade}"></p></a>
            <a class="dropdown-item" href="/dragiukr" ><p th:text="#{label.drag}"></p></a>
          </div>
        </li>
        <li class="nav-item active">
          <a href="login" class="nav-link "><i class="fa fa-home"></i><p th:text="#{label.signin}"></p></a>
        </li>
        <li class="nav-item active">
          <a th:href="@{?locale=ru}" class="nav-link "><i class="fa fa-home"></i>ru</a>
        </li>
        <li>
          <a th:href="@{?locale=eng}" class="nav-link "><i class="fa fa-home"></i>eng</a>
        </li>
        <li class="nav-item active">
          <a href="/logout" class="nav-link "><i class="fa fa-home"></i><p >Выйти</p></a>
        </li>
        <li  th:if="${role} == 1" class="nav-item active">
          <a href="/admin" class="nav-link "><i class="fa fa-home"></i><p>Админка</p></a>
        </li>

      </ul>

    </div>
  </div>
</nav>


  <div class="container-fluid"
    style="background: url(bg-header2.gif) repeat-x; padding-bottom: 7px; padding-top: 30px; background-size: cover;">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-12">
          <h1 style="color: #fff; font-size: 50px;">Личный кабинет</h1>
        </div>

      </div>
    </div>
  </div>


  <div class="container-fluid" style="padding-bottom: 7px; padding-top: 30px; background-size: cover;">
    <div class="container">
      <div class="row">
        <div class="col-lg-3 col-md-4 col-sm-4 text-center justify-content-center">
          <a class="personalhref" data-toggle="collapse" href="#multiCollapseExample1" role="button"
             aria-expanded="false" aria-controls="multiCollapseExample1">Корзина</a>
        </div>
        <div class="col-lg-3 col-md-4 col-sm-4 text-center justify-content-center">
          <a class="personalhref" data-toggle="collapse" href="#multiCollapseExample2" role="button"
             aria-expanded="false" aria-controls="multiCollapseExample2">Избранное</a>
        </div>
        <div class="col-lg-3 col-md-4 col-sm-4 text-center justify-content-center">
          <a class="personalhref" data-toggle="collapse" href="#multiCollapseExample3" role="button"
             aria-expanded="false" aria-controls="multiCollapseExample3">Доставки</a>
        </div>
      </div>
    </div>
  </div>

  <div class="container-fluid" style="margin: 30px auto 50px auto;">
    <div class="container text-center justify-content-center" style="border-radius: 15px; background-color: white;">
      <div class="collapse multi-collapse" id="multiCollapseExample1">
        <div class="card card-body" style="border: 1px solid white;">
          <p style="margin-bottom: 35px;">Корзина</p>
          <div class="cont-basket" style="box-shadow: 0 15px 30px 1px grey; background: #b3d7ff;border-radius: 10px;">
              </br>
            <h3>Товары</h3>
            </br>
            <p style="color:#000000;font-size: 20px;" th:text="${resultBasket}"></p>
            </br>

            <div class="cards" id = "basket_purchase">
              <div class="card" th:each="mapProduct : ${mapProducts}"  th:with="ps=${mapProduct.value}">

                <div style="border:2px solid #ccc;width: 300px; color:#000000" >
                  <p><img th:src="@{${mapProduct.key.getPhoto()}}" alt="" width="297" height="297"></p>
                  <label>Название: </label><p th:text="${mapProduct.key.getName()}"></p>
                  <label>Цена: </label><p th:text="${mapProduct.key.getPrice()}"></p>
                  <label>Количество: </label><p th:text="${mapProduct.key.getQuant()}"></p>
                  </hr>
                  <div><label>Количество в корзине:  </label>
                    <p th:text="${ps.getPurchase_quant()}"></p></div>
                  <p><input class="checkPS" name="goods" th:id="'chps'+${ps.getId()}" th:value="${ps.getId()}" type="checkbox"
                            th:if="${mapProduct.key.getQuant()} >= ${ps.getPurchase_quant()}"></p>
                  <p th:if="${mapProduct.key.getQuant()} < ${ps.getPurchase_quant()}" style="color: #ff0000;">Товара недостаточно на складе</p>
                  <p><a th:href="@{/index/id={p}(p=${mapProduct.key.getId()})}" class="btn btn-primary" >Изменить количество товара</a></p>
                  <p><form action="#" target="_self"><button onclick="deletePurchaseSale(this.id);" class="delClass" th:id="'deleteId'+${ps.getId()}" th:value="${ps.getId()}" >Удалить из корзины</button></form></p>
                </div>

              </div>
            </div>
            </br>
          </div>
</br>
          <div style="box-shadow: 0 15px 30px 1px grey; background: #b3d7ff;border-radius: 10px;">

              </br>
            <h3>Способ доставки</h3>
            </br>

            <div class="cont-service" id="cont-service">
              <div th:each="serv : ${services}">
                <input type="radio" name="service" id="service" th:value="${serv.getId()}">
                <label th:text="${serv.getName()}"></label>
              </div>
            </div>
              </br>

          </div>
          </br>
          <div class="justify-content-center text-center">
              <a href="/lk/buy" class="btn" id="buy" >Купить</a>
          </div>
          </br>

        </div>
        </div>
      </div>
    </div>
<form method="post" enctype="multipart/form-data">
    <div class="container-fluid" style="margin: 30px auto 50px auto;">
      <div class="container text-center justify-content-center" style="border-radius: 15px; background-color: white;">
        <div class="collapse multi-collapse" id="multiCollapseExample2">
          <div class="card card-body" style="border: 1Fpx solid white;">
            <p style="margin-bottom: 35px;">Избранное</p>
            <br/>
            <p style="color:#000000;font-size: 20px;" th:text="${resultFav}"></p>
            </br>
            <div class="cards">
              <div class="card" th:each="el : ${favproducts}"><div style="border:2px solid #ccc;width: 300px; color:#000000">
                <p><img th:src="@{${el.getPhoto()}}" alt="" width="297" height="297"></p>
                <label>Название: </label><p th:text="${el.getName()}"></p>
                <label>Цена: </label><p th:text="${el.getPrice()}"></p>
                <label>Количество: </label><p th:text="${el.getQuant()}"></p>
                <p><a th:href="@{/index/id={p}(p=${el.getId()})}" class="btn btn-primary" >Посмотреть</a></p>

              </div></div>
            </div>
            </br>

          </div>
          </div>
        </div>
      </div>
	</div>
</form>
<div class="container-fluid" style="margin: 30px auto 50px auto;">
  <div class="container text-center justify-content-center" style="border-radius: 15px; background-color: white;">
    <div class="collapse multi-collapse" id="multiCollapseExample3">
      <div class="card card-body" style="border: 1Fpx solid white;">
        <p style="margin-bottom: 35px;">Доставки</p>
        <br/>
        <p style="color:#000000;font-size: 20px;" th:text="${resultOrder}"></p>
        </br>
        <table>
          <thead>
          <tr>
            <th colspan="2">Список всех заказов</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td >Товар</td>
            <td >Количество</td>
            <td >Цена</td>
            <td >Статус доставки</td>
            <td >Сервис доставки</td>
            <td >Дата оформления</td>
          </tr>
          <tr th:each="mapOrder : ${mapOrders}"  th:with="deliv=${mapOrder.value}">
            <td>
              <p><a th:href="@{/index/id={p}(p=${mapOrder.key.getProduct_id()})}" class="btn btn-primary" >Посмотреть товар</a></p>
            </td>
            <td th:text="${mapOrder.key.getPurchase_quant()}"></td>
            <td th:text="${mapOrder.key.getPurchase_price()}"></td>
            <td th:if="${deliv.getIsSent()}==1">Оплачен, передан в доставку</td>
            <td th:unless="${deliv.getIsSent()}==1">Не оплачен</td>
            <td th:switch="${deliv.getService()}">
              <p th:case="1">Russian Post</p>
              <p th:case="2">SDEK</p>
              <p th:case="3">Boxberry</p>
            </td>
            <td th:text="${deliv.getDate_delivery()}"></td>

          </tr>
          </tbody>
        </table>
        </br>

      </div>
    </div>
  </div>
</div>
</div>



      <!-- Optional JavaScript -->
      <!-- jQuery first, then Popper.js, then Bootstrap JS -->
      <script src="/js/jquery-3.4.1.min.js"></script>
      <script src="https://kit.fontawesome.com/f54fd41071.js" crossorigin="anonymous"></script>

      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
      <script type="text/javascript" src="/js/mainAjax.js"></script>

</body>

</html>